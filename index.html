<!DOCTYPE html>
<html>
<style>

.dv1 {
  width: 45%;
  height: 80px;
  background: #d9d9d9;
  color: #555;
  float: left;
  text-align: center;  
  font-size: 25px;
  margin-top: 10px;
  margin-bottom: 10px;  
  padding-top: 5px;
  padding-bottom: 5px;  
  cursor: pointer;
  border-color: black;
  border: 2px solid;  
}

.LangFrom {
  margin-right: 10px;
  margin-left: 0px;
  padding-right: 5px;
  padding-left: 5px;  
  display: block;
}

.LangTo {
  margin-right: 0px;
  margin-left: 10px;
  padding-right: 5px;
  padding-left: 5px;
  display: block;  
}

.Null {
  background: #ffffff;
  color: #ffffff;
  cursor: auto;
  user-select: none; 
}


.active1 {
  border-color: #2196F3;
  background: #21f3d8;    
}



</style>
<body>

<div id="m_container1">
</div>

<script>

let prevSelLangFrom;

StartLoadPage();

async function loadNames() {
  const response = await fetch("https://nirslife.github.io/array1.json");
  const names = await response.json();
  CallBackForInitLoadPage2(names);
  console.log(names); 
  // logs [{ name: 'Joker'}, { name: 'Batman' }]
}

function GetJsonArray1() {	       
       fetch("https://nirslife.github.io/array1.json", 
	           { 
			      method: 'GET'
               }
        ).then(function(response) {  
		    let ret = response.json();
		//	CallBackForInitLoadPage2(ret);  
            }, function(error) {
                 alert(error.message); //=> String
             })          
    } 

function InitLoadPage2() {
 //GetJsonArray1();
 loadNames();
}

function CallBackForInitLoadPage2(aText){
  //let List1 = JSON.parse(aText);
  let List1 = aText;
  let cntr = document.getElementById("m_container1");
  AddItemToHtml(cntr,List1); 
}

function InitLoadPage1() {
let text = '{"arrw":[' +
'{"Eng":"Apple","Rus":"Яблоко" },' +
'{"Eng":"Road","Rus":"Дорога" },' +
'{"Eng":"Earn","Rus":"зарабатывать" },' +
'{"Eng":"take place","Rus":"происходят, состояться" },' +
'{"Eng":"arguing","Rus":"спорят" },' +
'{"Eng":"Yelow","Rus":"Желтый" }]}';
  let List1 = JSON.parse(text);
  let cntr = document.getElementById("m_container1");
  AddItemToHtml(cntr,List1); 
}

function StartLoadPage() {
  InitLoadPage2();
}


function getRandomInt(max) {
  return Math.floor(Math.random() * max);
}

function InitRandomArr(max, Arr1) {
  for (i = 0; i < max; i++) {
    Arr1[i] = i;     
  }
  let j; let a;
  for (i = max - 1; i >= 0; i--) {    
    j = getRandomInt(max - 1);  
	a = Arr1[i];
    Arr1[i] = Arr1[j];
	Arr1[j] = a;
  }  
}


function speak(text) {
            const message = new SpeechSynthesisUtterance();
            message.lang = "en-EN";
            message.text = text;
            window.speechSynthesis.speak(message)
        }


function clickLangFrom(aNode)
{
  if (prevSelLangFrom) {
    prevSelLangFrom.className = "dv1 LangFrom";          
  }
  prevSelLangFrom = aNode;        
  aNode.className = "dv1 LangFrom active1";
  //speak(aNode.innerText);
  speak(aNode.getAttribute("atext"));
  //console.log(aNode.getAttribute("arrnum"));
}

function clickLangTo(aNode)
{
  if (prevSelLangFrom) {
    if (prevSelLangFrom.getAttribute("arrnum") == aNode.getAttribute("arrnum")){	  
      aNode.removeAttribute("onclick"); 
	  aNode.className = "dv1 LangTo Null";	  
	  prevSelLangFrom.removeAttribute("onclick");
	  prevSelLangFrom.className = "dv1 LangFrom Null";	  
	  prevSelLangFrom = 0;
	}
  }  
}

 
function AddItemToHtml(aToNode,obj)
  {
  const rArr = [];   
  InitRandomArr(obj.arrw.length, rArr);
  for (i = 0; i < obj.arrw.length; i++) {  
   const LangFrom = document.createElement("div");
   //LangFrom.innerText = obj.arrw[i].Eng;
   LangFrom.innerText = "Eng "+i;
   LangFrom.className = "dv1 LangFrom";
   const att1 = document.createAttribute("onclick");
   att1.value = "clickLangFrom(this)";  
   LangFrom.setAttributeNode(att1);        
   const att12 = document.createAttribute("arrnum");
   att12.value = i;  
   LangFrom.setAttributeNode(att12);              
   const att13 = document.createAttribute("atext");
   att13.value = obj.arrw[i].Eng;  
   LangFrom.setAttributeNode(att13);                 
   aToNode.appendChild(LangFrom);   
   
   
   const LangTo = document.createElement("div");
   LangTo.innerText = obj.arrw[rArr[i]].Rus;
   const att2 = document.createAttribute("arrnum");
   att2.value = rArr[i];  
   LangTo.setAttributeNode(att2);           
   LangTo.className = "dv1 LangTo";
   const att22 = document.createAttribute("onclick");
   att22.value = "clickLangTo(this)";  
   LangTo.setAttributeNode(att22);           
   aToNode.appendChild(LangTo);      
 }
}   // end of function

</script>

</body>
</html>
